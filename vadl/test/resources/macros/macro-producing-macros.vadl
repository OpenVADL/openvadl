// SPDX-FileCopyrightText : Â© 2024 TU Wien <vadl@tuwien.ac.at>
// SPDX-License-Identifier: Apache-2.0

instruction set architecture MacroProducingMacros = {

  model LUTProducer(name: Id, cond1: Ex, cond2: Ex): IsaDefs = {
    model $name(candidate: Ex, res1: Ex, res2: Ex, defaultRes: Ex): Ex = {
      match $candidate with
      { $cond1 => $res1
      , $cond2 => $res2
      , _ => $defaultRes
      }
    }
  }

  $LUTProducer(SimpleLut ; 7 ; 8)
  constant a = $SimpleLut(5+2 ; 1 ; 0 ; -1)
}
